"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[7590],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>i});var r=t(96540);const s={},l=r.createContext(s);function o(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(l.Provider,{value:n},e.children)}},72206:(e,n,t)=>{t.d(n,{A:()=>A});var r=t(96540),s=t(18215),l=t(80052),o=t(56347),i=t(35793),a=t(99025),c=t(4430),d=t(44148);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:s}}=e;return{value:n,label:t,attributes:r,default:s}}))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:t}=e;const s=(0,o.W6)(),l=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,a.aZ)(l),(0,r.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(s.location.search);n.set(l,e),s.replace({...s.location,search:n.toString()})}),[l,s])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,l=h(e),[o,a]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:l}))),[c,u]=x({queryString:t,groupId:s}),[f,m]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[s,l]=(0,d.Dv)(t);return[s,(0,r.useCallback)((e=>{t&&l.set(e)}),[t,l])]}({groupId:s}),g=(()=>{const e=c??f;return p({value:e,tabValues:l})?e:null})();(0,i.A)((()=>{g&&a(g)}),[g]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);a(e),u(e),m(e)}),[u,m,l]),tabValues:l}}var m=t(75251);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=t(74848);function y(e){let{className:n,block:t,selectedValue:r,selectValue:o,tabValues:i}=e;const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),d=e=>{const n=e.currentTarget,t=a.indexOf(n),s=i[t].value;s!==r&&(c(n),o(s))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=a.indexOf(e.currentTarget)+1;n=a[t]??a[0];break}case"ArrowLeft":{const t=a.indexOf(e.currentTarget)-1;n=a[t]??a[a.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:l}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{a.push(e)},onKeyDown:u,onClick:d,...l,className:(0,s.A)("tabs__item",g.tabItem,l?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function b(e){let{lazy:n,children:t,selectedValue:l}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===l));return e?(0,r.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==l})))})}function w(e){const n=f(e);return(0,j.jsxs)("div",{className:(0,s.A)("tabs-container",g.tabList),children:[(0,j.jsx)(y,{...n,...e}),(0,j.jsx)(b,{...n,...e})]})}function A(e){const n=(0,m.A)();return(0,j.jsx)(w,{...e,children:u(e.children)},String(n))}},82223:(e,n,t)=>{t.d(n,{A:()=>o});t(96540);var r=t(18215);const s={tabItem:"tabItem_Ymn6"};var l=t(74848);function o(e){let{children:n,hidden:t,className:o}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,o),hidden:t,children:n})}},88199:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>u,default:()=>f,frontMatter:()=>d,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"farming-&-staking/network/port-config/cli","title":"CLI","description":"Port forwarding and firewall setup for CLI farming with node and farmer","source":"@site/i18n/id/docusaurus-plugin-content-docs/current/farming-&-staking/network/port-config/cli.mdx","sourceDirName":"farming-&-staking/network/port-config","slug":"/network/port-config/cli","permalink":"/id/network/port-config/cli","draft":false,"unlisted":false,"editUrl":"https://github.com/autonomys/subspace-docs/edit/main/docs/farming-&-staking/network/port-config/cli.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"CLI","sidebar_position":2,"description":"Port forwarding and firewall setup for CLI farming with node and farmer","slug":"/network/port-config/cli","keywords":["CLI","Port Configuration","Node Setup","Farmer Setup"]},"sidebar":"tutorialSidebar","previous":{"title":"Space Acres","permalink":"/id/network/port-config/space-acres"},"next":{"title":"Domain Operator","permalink":"/id/network/port-config/domain-operator"}}');var s=t(74848),l=t(28453),o=t(72206),i=t(82223),a=t(15912),c=t(76122);const d={title:"CLI",sidebar_position:2,description:"Port forwarding and firewall setup for CLI farming with node and farmer",slug:"/network/port-config/cli",keywords:["CLI","Port Configuration","Node Setup","Farmer Setup"]},u="CLI",h={},p=[{value:"Network Architecture",id:"network-architecture",level:2},{value:"Required Ports",id:"required-ports",level:2},{value:"Complete Setup Guide",id:"complete-setup-guide",level:2},{value:"Step 1: Gather Network Information",id:"step-1-gather-network-information",level:3},{value:"Step 2: Router Port Forwarding",id:"step-2-router-port-forwarding",level:3},{value:"Step 3: Firewall Configuration",id:"step-3-firewall-configuration",level:3},{value:"Step 4: Start Node and Farmer",id:"step-4-start-node-and-farmer",level:3},{value:"Step 5: Verify Configuration",id:"step-5-verify-configuration",level:3},{value:"Common Issues and Solutions",id:"common-issues-and-solutions",level:2},{value:"Issue: Low Peer Count",id:"issue-low-peer-count",level:3},{value:"Issue: RPC Connection Failed",id:"issue-rpc-connection-failed",level:3},{value:"Issue: CGNAT / No Public IP",id:"issue-cgnat--no-public-ip",level:3},{value:"Advanced Configurations",id:"advanced-configurations",level:2},{value:"Multiple Farmers, Single Node",id:"multiple-farmers-single-node",level:3},{value:"Custom Port Configuration",id:"custom-port-configuration",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2}];function x(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"cli",children:"CLI"})}),"\n",(0,s.jsx)(n.p,{children:"The CLI provides more control over your setup but requires configuring additional ports for the separate node and farmer components."}),"\n",(0,s.jsx)(n.h2,{id:"network-architecture",children:"Network Architecture"}),"\n",(0,s.jsx)(n.mermaid,{value:'graph LR\n    subgraph "Your Setup"\n        Node("Node<br/>30333, 30433")\n        Farmer("Farmer<br/>30533")\n        Node <--\x3e|"RPC<br>9944"| Farmer\n    end\n\n    subgraph "Autonomys Network"\n        Peer1([Consensus Peers])\n        Peer2([DSN Peers])\n        Peer3([Other Farmers])\n    end\n\n    Node <--\x3e|"Consensus P2P<br>30333"| Peer1\n    Node <--\x3e|"DSN<br>30433"| Peer2\n    Farmer <--\x3e|"Farming P2P<br>30533"| Peer3'}),"\n",(0,s.jsx)(n.h2,{id:"required-ports",children:"Required Ports"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Port"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Protocol"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Direction"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Component"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Purpose"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Impact if Blocked"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"30333"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"TCP"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Inbound/Outbound"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Node"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Consensus P2P"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Poor block propagation, missed PoT slots"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"30433"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"TCP"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Inbound/Outbound"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Node"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"DSN communication"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Slow piece retrieval, reduced cache efficiency"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"30533"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"TCP"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Inbound/Outbound"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Farmer"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Farmer P2P network"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Missed challenges, reduced rewards"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:(0,s.jsx)(n.strong,{children:"9944"})}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"TCP"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Local only"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Node"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"RPC for farmer-node communication"}),(0,s.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,s.jsx)(a.A,{icon:c.Ze.WARNING})," Never expose to internet"]})]})]})]}),"\n",(0,s.jsx)(n.admonition,{title:"Security Warning",type:"caution",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"RPC port 9944 should NEVER be exposed to the internet."})," This port contains sensitive APIs that could compromise your node. It should only be accessible locally or within your secure network."]})}),"\n",(0,s.jsx)(n.h2,{id:"complete-setup-guide",children:"Complete Setup Guide"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-gather-network-information",children:"Step 1: Gather Network Information"}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(i.A,{value:"cli",label:"Command Line Method",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Get your public IP address\ncurl -s https://api.ipify.org\necho "Your public IP: $(curl -s https://api.ipify.org)"\n\n# Get your local IP and gateway\n# Linux/macOS:\nip route | grep default  # Gateway\nhostname -I | awk \'{print $1}\'  # Local IP\n\n# Windows PowerShell:\nipconfig | findstr "Default Gateway"  # Gateway\nipconfig | findstr "IPv4 Address"  # Local IP\n'})})}),(0,s.jsxs)(i.A,{value:"browser",label:"Browser Method",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Public IP Address:"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Visit ",(0,s.jsx)(n.a,{href:"https://whatismyip.com",children:"whatismyip.com"})]}),"\n",(0,s.jsx)(n.li,{children:"Note the IPv4 address shown"}),"\n"]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Local Network Info:"})}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Windows: Run ",(0,s.jsx)(n.code,{children:"cmd"})," \u2192 type ",(0,s.jsx)(n.code,{children:"ipconfig"})]}),"\n",(0,s.jsx)(n.li,{children:"macOS: System Preferences \u2192 Network \u2192 Advanced"}),"\n",(0,s.jsxs)(n.li,{children:["Linux: Terminal \u2192 ",(0,s.jsx)(n.code,{children:"ip addr show"})]}),"\n"]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Router IP (Gateway):"})}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Usually ",(0,s.jsx)(n.code,{children:"192.168.1.1"})," or ",(0,s.jsx)(n.code,{children:"192.168.0.1"})]}),"\n",(0,s.jsx)(n.li,{children:"Check router label or network settings"}),"\n"]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"step-2-router-port-forwarding",children:"Step 2: Router Port Forwarding"}),"\n",(0,s.jsx)(n.p,{children:"Access your router's admin panel and create these port forwarding rules:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Rule Name"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"External Port"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Internal IP"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Internal Port"}),(0,s.jsx)(n.th,{style:{textAlign:"left"},children:"Protocol"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Autonomys-Node-Consensus"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30333"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Your PC IP"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30333"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"TCP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Autonomys-Node-DSN"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30433"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Your PC IP"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30433"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"TCP"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Autonomys-Farmer"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30533"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"Your PC IP"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"30533"}),(0,s.jsx)(n.td,{style:{textAlign:"left"},children:"TCP"})]})]})]}),"\n",(0,s.jsxs)(n.admonition,{title:"Router Access",type:"tip",children:[(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"http://192.168.1.1"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"http://192.168.0.1"})}),"\n"]}),(0,s.jsx)(n.p,{children:"Default credentials are often on the router label."})]}),"\n",(0,s.jsx)(n.h3,{id:"step-3-firewall-configuration",children:"Step 3: Firewall Configuration"}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsxs)(i.A,{value:"windows",label:"Windows",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"PowerShell (Run as Administrator):"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-powershell",children:'# Create firewall rules for CLI farming\nNew-NetFirewallRule -DisplayName "Autonomys Node Consensus" `\n    -Direction Inbound -Protocol TCP -LocalPort 30333 -Action Allow\n\nNew-NetFirewallRule -DisplayName "Autonomys Node DSN" `\n    -Direction Inbound -Protocol TCP -LocalPort 30433 -Action Allow\n\nNew-NetFirewallRule -DisplayName "Autonomys Farmer" `\n    -Direction Inbound -Protocol TCP -LocalPort 30533 -Action Allow\n\n# RPC for local network only (adjust subnet as needed)\nNew-NetFirewallRule -DisplayName "Autonomys RPC Local" `\n    -Direction Inbound -Protocol TCP -LocalPort 9944 `\n    -RemoteAddress LocalSubnet -Action Allow\n\n# Verify rules\nGet-NetFirewallRule -DisplayName "Autonomys*" |\n    Format-Table DisplayName, Enabled, Direction, Action\n'})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Expected output:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"DisplayName              Enabled Direction Action\n-----------              ------- --------- ------\nAutonomys Node Consensus True    Inbound   Allow\nAutonomys Node DSN       True    Inbound   Allow\nAutonomys Farmer         True    Inbound   Allow\nAutonomys RPC Local      True    Inbound   Allow\n"})})]}),(0,s.jsxs)(i.A,{value:"linux",label:"Linux",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"UFW (Ubuntu/Debian):"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Enable firewall\nsudo ufw enable\n\n# Allow required ports\nsudo ufw allow 30333/tcp comment 'Autonomys Node Consensus'\nsudo ufw allow 30433/tcp comment 'Autonomys Node DSN'\nsudo ufw allow 30533/tcp comment 'Autonomys Farmer'\n\n# RPC for local network only (adjust subnet)\nsudo ufw allow from 192.168.1.0/24 to any port 9944 proto tcp comment 'Node RPC Local'\n\n# Verify configuration\nsudo ufw status verbose\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Expected output:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Status: active\nTo                         Action      From\n--                         ------      ----\n30333/tcp                  ALLOW       Anywhere                   # Autonomys Node Consensus\n30433/tcp                  ALLOW       Anywhere                   # Autonomys Node DSN\n30533/tcp                  ALLOW       Anywhere                   # Autonomys Farmer\n9944/tcp                   ALLOW       192.168.1.0/24             # Node RPC Local\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Firewalld (RHEL/Fedora):"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Add ports\nsudo firewall-cmd --permanent --add-port=30333/tcp\nsudo firewall-cmd --permanent --add-port=30433/tcp\nsudo firewall-cmd --permanent --add-port=30533/tcp\n\n# RPC for local only\nsudo firewall-cmd --permanent --add-rich-rule=\'\n  rule family="ipv4"\n  source address="192.168.1.0/24"\n  port protocol="tcp" port="9944" accept\'\n\n# Reload configuration\nsudo firewall-cmd --reload\n\n# Verify\nsudo firewall-cmd --list-all\n'})})]}),(0,s.jsxs)(i.A,{value:"macos",label:"macOS",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using pfctl:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Create pf rules file\nsudo tee /etc/pf.anchors/autonomys << EOF\n# Autonomys Network Ports\npass in proto tcp from any to any port 30333\npass in proto tcp from any to any port 30433\npass in proto tcp from any to any port 30533\n# RPC local only\npass in proto tcp from 192.168.1.0/24 to any port 9944\nEOF\n\n# Load anchor in main config\necho "anchor \\"autonomys\\"" | sudo tee -a /etc/pf.conf\necho "load anchor \\"autonomys\\" from \\"/etc/pf.anchors/autonomys\\"" | sudo tee -a /etc/pf.conf\n\n# Enable and load rules\nsudo pfctl -e -f /etc/pf.conf\n'})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"GUI Method:"})}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"System Preferences \u2192 Security & Privacy \u2192 Firewall"}),"\n",(0,s.jsx)(n.li,{children:"Firewall Options \u2192 Add subspace-node and subspace-farmer"}),"\n",(0,s.jsx)(n.li,{children:'Ensure "Block all incoming" is unchecked'}),"\n"]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"step-4-start-node-and-farmer",children:"Step 4: Start Node and Farmer"}),"\n",(0,s.jsx)(n.p,{children:"Start your node with explicit network configuration:"}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(i.A,{value:"basic",label:"Basic Start",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Start node\n./subspace-node run \\\n  --chain mainnet \\\n  --listen-on /ip4/0.0.0.0/tcp/30333 \\\n  --dsn-listen-on /ip4/0.0.0.0/tcp/30433 \\\n  --rpc-listen-on 127.0.0.1:9944\n\n# Start farmer (in separate terminal)\n./subspace-farmer farm \\\n  --node-rpc-url ws://127.0.0.1:9944 \\\n  --listen-on /ip4/0.0.0.0/tcp/30533 \\\n  path=/path/to/farm,size=100GiB\n"})})}),(0,s.jsx)(i.A,{value:"systemd",label:"Systemd Service",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Node service configuration\nsudo tee /etc/systemd/system/subspace-node.service << EOF\n[Unit]\nDescription=Subspace Node\nAfter=network.target\n\n[Service]\nType=simple\nUser=subspace\nExecStart=/usr/local/bin/subspace-node run \\\\\n  --chain mainnet \\\\\n  --base-path /var/lib/subspace-node \\\\\n  --listen-on /ip4/0.0.0.0/tcp/30333 \\\\\n  --dsn-listen-on /ip4/0.0.0.0/tcp/30433 \\\\\n  --rpc-listen-on 127.0.0.1:9944\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\nEOF\n\n# Start services\nsudo systemctl daemon-reload\nsudo systemctl enable --now subspace-node\nsudo systemctl enable --now subspace-farmer\n"})})}),(0,s.jsx)(i.A,{value:"docker",label:"Docker",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# docker-compose.yml\n\nservices:\n  node:\n    image: ghcr.io/autonomys/node:latest\n    ports:\n      - "30333:30333"  # Consensus P2P\n      - "30433:30433"  # DSN\n      - "127.0.0.1:9944:9944"  # RPC local only\n    command: [\n      "run",\n      "--chain", "mainnet",\n      "--listen-on", "/ip4/0.0.0.0/tcp/30333",\n      "--dsn-listen-on", "/ip4/0.0.0.0/tcp/30433",\n      "--rpc-listen-on", "0.0.0.0:9944"\n    ]\n\n  farmer:\n    image: ghcr.io/autonomys/farmer:latest\n    depends_on:\n      - node\n    ports:\n      - "30533:30533"  # Farmer P2P\n    command: [\n      "farm",\n      "--node-rpc-url", "ws://node:9944",\n      "--listen-on", "/ip4/0.0.0.0/tcp/30533",\n      "path=/farms/farm1,size=100GiB"\n    ]\n'})})})]}),"\n",(0,s.jsx)(n.h3,{id:"step-5-verify-configuration",children:"Step 5: Verify Configuration"}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsxs)(i.A,{value:"logs",label:"Check Logs",children:[(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Node logs should show:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Subspace Node\nChain: Mainnet\nNode name: YOUR_NODE_NAME\nListening on: /ip4/0.0.0.0/tcp/30333\nDSN listening on: /ip4/0.0.0.0/tcp/30433\nDiscovered new peer: 12D3KooW...\nPeers: 25\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Farmer logs should show:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Subspace Farmer\nConnected to node: ws://127.0.0.1:9944\nListening on: /ip4/0.0.0.0/tcp/30533\nFarm size: 100.0 GB\nPlotted sectors: 150/200\nFarming peers: 18\n"})})]}),(0,s.jsx)(i.A,{value:"ports",label:"Test Ports",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Check listening ports\nnetstat -tuln | grep -E "30333|30433|30533|9944"\n\n# Expected output:\ntcp  0  0  0.0.0.0:30333  0.0.0.0:*  LISTEN\ntcp  0  0  0.0.0.0:30433  0.0.0.0:*  LISTEN\ntcp  0  0  0.0.0.0:30533  0.0.0.0:*  LISTEN\ntcp  0  0  127.0.0.1:9944 0.0.0.0:*  LISTEN  # Local only!\n\n# Test external connectivity (from another machine)\nnc -zv YOUR_PUBLIC_IP 30333\n# Expected: Connection succeeded\n\n# Test with online tool\n# Visit https://canyouseeme.org and test each port\n'})})}),(0,s.jsx)(i.A,{value:"metrics",label:"Check Metrics",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Query node metrics\ncurl -s http://127.0.0.1:9615/metrics | grep peers\n# Expected: subspace_sub_libp2p_peers_count 20+\n\n# Check farmer logs for status\ngrep -i "farm\\|allocated space" /path/to/farmer.log | tail -3\n# Shows farm allocation and farming status\n'})})})]}),"\n",(0,s.jsx)(n.h2,{id:"common-issues-and-solutions",children:"Common Issues and Solutions"}),"\n",(0,s.jsx)(n.h3,{id:"issue-low-peer-count",children:"Issue: Low Peer Count"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Symptoms:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Node shows < 40 peers"}),"\n",(0,s.jsx)(n.li,{children:"Slow synchronization"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Diagnostic Steps:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# 1. Check if ports are actually open\nsudo netstat -tuln | grep -E "30333|30433|30533"\n\n# 2. Test from external source\ncurl -s https://api.ipify.org  # Get your IP\n# Have a friend run: nc -zv YOUR_IP 30333\n\n# 3. Check firewall logs\n# Linux: sudo journalctl -u ufw -n 50\n# Windows: Get-WinEvent -FilterHashtable @{LogName="Microsoft-Windows-Windows Firewall With Advanced Security/Firewall"; ID=2004}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Verify router port forwarding saved correctly"}),"\n",(0,s.jsx)(n.li,{children:"Check for double NAT (router behind router)"}),"\n",(0,s.jsx)(n.li,{children:"Ensure firewall rules are active"}),"\n",(0,s.jsx)(n.li,{children:"Try alternate ports if ISP blocks defaults"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"issue-rpc-connection-failed",children:"Issue: RPC Connection Failed"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Error:"}),' "Cannot connect to node RPC"']}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# 1. Verify node is running and RPC is enabled\nps aux | grep subspace-node\n\n# 2. Check RPC is listening\nnetstat -tuln | grep 9944\n\n# 3. Test RPC locally\ncurl -H "Content-Type: application/json" \\\n  -d \'{"id":1, "jsonrpc":"2.0", "method": "system_health"}\' \\\n  http://127.0.0.1:9944\n\n# 4. If using Docker, ensure correct network\ndocker network ls\ndocker inspect subspace-node | grep NetworkMode\n'})}),"\n",(0,s.jsx)(n.h3,{id:"issue-cgnat--no-public-ip",children:"Issue: CGNAT / No Public IP"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Identifying CGNAT:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check if behind CGNAT\ncurl -s https://api.ipify.org  # Public IP\n# Compare with router WAN IP\n# If different = likely CGNAT\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Solutions:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Request public IP from ISP"})," (may cost extra)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use IPv6"})," if available:","\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"--listen-on /ip6/::/tcp/30333\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"VPN with port forwarding"})," (impacts performance)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rent a VPS"})," as public entry point"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"advanced-configurations",children:"Advanced Configurations"}),"\n",(0,s.jsx)(n.h3,{id:"multiple-farmers-single-node",children:"Multiple Farmers, Single Node"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Node (Machine 1)\n./subspace-node run \\\n  --rpc-listen-on 0.0.0.0:9944 \\\n  --rpc-cors all\n\n# Farmer 1 (Machine 2)\n./subspace-farmer farm \\\n  --node-rpc-url ws://machine1:9944 \\\n  --listen-on /ip4/0.0.0.0/tcp/30533\n\n# Farmer 2 (Machine 3)\n./subspace-farmer farm \\\n  --node-rpc-url ws://machine1:9944 \\\n  --listen-on /ip4/0.0.0.0/tcp/30534  # Different port!\n"})}),"\n",(0,s.jsx)(n.h3,{id:"custom-port-configuration",children:"Custom Port Configuration"}),"\n",(0,s.jsx)(n.p,{children:"If default ports are blocked:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Node with custom ports\n./subspace-node run \\\n  --listen-on /ip4/0.0.0.0/tcp/31333 \\\n  --dsn-listen-on /ip4/0.0.0.0/tcp/31433 \\\n  --rpc-port 9955\n\n# Farmer with custom port\n./subspace-farmer farm \\\n  --node-rpc-url ws://127.0.0.1:9955 \\\n  --listen-on /ip4/0.0.0.0/tcp/31533\n"})}),"\n",(0,s.jsx)(n.p,{children:"Remember to update router and firewall rules to match!"}),"\n",(0,s.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(a.A,{icon:c.Ze.CHECK_CIRCLE})," ",(0,s.jsx)(n.strong,{children:"DO:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Keep RPC port (9944) local only"}),"\n",(0,s.jsx)(n.li,{children:"Use strong firewall rules"}),"\n",(0,s.jsx)(n.li,{children:"Monitor logs for suspicious activity"}),"\n",(0,s.jsx)(n.li,{children:"Regular software updates"}),"\n",(0,s.jsx)(n.li,{children:"Use fail2ban for SSH if exposed"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(a.A,{icon:c.Ze.CLOSE_CIRCLE})," ",(0,s.jsx)(n.strong,{children:"DON'T:"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Expose RPC to internet"}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"--rpc-methods unsafe"})," with public RPC"]}),"\n",(0,s.jsx)(n.li,{children:"Disable firewall completely"}),"\n",(0,s.jsx)(n.li,{children:"Use DMZ for farming setup"}),"\n",(0,s.jsx)(n.li,{children:"Share node/farmer private keys"}),"\n"]})]})}function f(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}}}]);