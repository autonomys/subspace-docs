"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[9417],{7239:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"farming-&-staking/farming/cli/cli-farming-cluster","title":"\u8015\u79cd\u96c6\u7fa4","description":"\u5982\u4f55\u8bbe\u7f6e\u548c\u914d\u7f6e\u4e00\u4e2a\u519c\u6c11\u96c6\u7fa4","source":"@site/i18n/zh/docusaurus-plugin-content-docs/current/farming-&-staking/farming/cli/cli-farming-cluster.mdx","sourceDirName":"farming-&-staking/farming/cli","slug":"/farming/cli/cluster","permalink":"/zh/farming/cli/cluster","draft":false,"unlisted":false,"editUrl":"https://github.com/autonomys/subspace-docs/edit/main/docs/farming-&-staking/farming/cli/cli-farming-cluster.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"\u8015\u79cd\u96c6\u7fa4","sidebar_position":2,"description":"\u5982\u4f55\u8bbe\u7f6e\u548c\u914d\u7f6e\u4e00\u4e2a\u519c\u6c11\u96c6\u7fa4","slug":"/farming/cli/cluster","keywords":["\u8015\u79cd\u96c6\u7fa4","\u519c\u592b","\u8015\u4f5c","CLI","\u96c6\u7fa4","Docker."]},"sidebar":"tutorialSidebar","previous":{"title":"\u5b89\u88c5","permalink":"/zh/farming/cli/install"},"next":{"title":"\u5c0f\u8d34\u58eb\u548c\u6280\u5de7","permalink":"/zh/farming/cli/tips"}}');var t=r(74848),a=r(28453);const l={title:"\u8015\u79cd\u96c6\u7fa4",sidebar_position:2,description:"\u5982\u4f55\u8bbe\u7f6e\u548c\u914d\u7f6e\u4e00\u4e2a\u519c\u6c11\u96c6\u7fa4",slug:"/farming/cli/cluster",keywords:["\u8015\u79cd\u96c6\u7fa4","\u519c\u592b","\u8015\u4f5c","CLI","\u96c6\u7fa4","Docker."]},i=void 0,c={},o=[{value:"\u5173\u4e8e\u7f51\u7edc\u7684\u8003\u91cf",id:"\u5173\u4e8e\u7f51\u7edc\u7684\u8003\u91cf",level:2},{value:"\u4e3b\u8981\u4f18\u52bf",id:"\u4e3b\u8981\u4f18\u52bf",level:2},{value:"NATS",id:"nats",level:2},{value:"\u7ec4\u4ef6\u914d\u7f6e",id:"\u7ec4\u4ef6\u914d\u7f6e",level:2},{value:"\u5206\u7ec4\u7ec4\u4ef6",id:"\u5206\u7ec4\u7ec4\u4ef6",level:3},{value:"\u8fdb\u9636",id:"\u8fdb\u9636",level:2},{value:"NATS \u96c6\u7fa4",id:"nats-\u96c6\u7fa4",level:3},{value:"\u591a\u7ec4\u4ef6",id:"\u591a\u7ec4\u4ef6",level:3}];function d(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\u519c\u6c11\u96c6\u7fa4\u662f\u4e3a\u8f83\u5927\u89c4\u6a21\u7684\u5bb6\u6c11\u8bbe\u8ba1\u7684\uff0c\u4ee5\u6709\u6548\u5730\u5e94\u5bf9\u6269\u5c55\u65b9\u9762\u7684\u6311\u6218\u3002 \u5b83\u7531\u56db\u4e2a\u4e3b\u8981\u90e8\u5206\u7ec4\u6210\uff0c\u901a\u8fc7\u4e00\u4e2aNATS\u670d\u52a1\u5668\u76f8\u4e92\u8054\u7cfb\u3002"}),"\n",(0,t.jsx)(n.p,{children:"This setup enables powerful remote computing capabilities. For example, if a computer is ideal for proving challenges but not for plotting, you can run the farmer component on that machine while utilizing one or more remote machines for plotting. This ensures continuous plotting and replotting across all storage locations, optimizing the use of plotters until all sectors are fully plotted and replotted."}),"\n",(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(n.mermaid,{value:"flowchart\nNATS((NATS Server))\nNATS  <--\x3e  Controller(Controller)\nNATS  <--\x3e  Cache(Cache)\nNATS  <--\x3e  Farmer(Farmer)\nNATS  <--\x3e  Plotter(Plotter)"})}),"\n",(0,t.jsx)(n.h2,{id:"\u5173\u4e8e\u7f51\u7edc\u7684\u8003\u91cf",children:"\u5173\u4e8e\u7f51\u7edc\u7684\u8003\u91cf"}),"\n",(0,t.jsx)(n.p,{children:"\u96c6\u7fa4\u4f7f\u7528\u6a21\u5757\u5316\u67b6\u6784\u6765\u8fd0\u8425\u4e00\u4e2a\u519c\u573a\uff0c \u6bcf\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u72ec\u7acb\u8fd0\u884c\uff0c\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u591a\u4e2a\u7ec4\u4ef6\u7684\u5b9e\u4f8b\u6765\u6269\u5c55\uff0c\u4ee5\u589e\u52a0\u53ef\u6269\u5c55\u6027\u548c\u5197\u4f59\u6027\u3002 \u56e0\u6b64\uff0c\u5fc5\u987b\u786e\u4fdd\u6709\u8db3\u591f\u7684\u5c40\u57df\u7f51\u5e26\u5bbd\uff0c\u4ee5\u4fbf\u4e8e\u5728\u4f60\u7f51\u7edc\u4e2d\u8fd9\u4e9b\u7ec4\u4ef6\u95f4\u6570\u636e\u7684\u9ad8\u6548\u4f20\u8f93\u3002"}),"\n",(0,t.jsx)(n.admonition,{title:"\u7f51\u7edc\u8981\u6c42",type:"caution",children:(0,t.jsx)(n.p,{children:"\u5bf9\u8fd9\u6837\u7684\u6d41\u91cf\u6765\u8bf4\uff0c1 Gbit \u7f51\u7edc\u5f88\u53ef\u80fd\u4e0d\u591f\uff0c\u7279\u522b\u662f\u5f53\u4f7f\u7528 GPU \u7ed8\u56fe\u6216\u591a\u4e2a\u7ed8\u56fe\u670d\u52a1\u5668\u65f6\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c2.5 Gbit\u7f51\u7edc\u662f\u6ee1\u8db3\u9700\u6c42\u7684\u6700\u4f4e\u6807\u51c6\uff0c\u5bf9\u4e8e\u66f4\u5927\u7684\u96c6\u7fa4\uff0c\u5e94\u5347\u7ea7\u5230 10 Gbit\u6216\u66f4\u9ad8\u3002"})}),"\n",(0,t.jsx)(n.admonition,{title:"\u5e26\u5bbd\u4f18\u5316\u5efa\u8bae",type:"info",children:(0,t.jsx)(n.p,{children:"\u60a8\u53ef\u4ee5\u901a\u8fc7\u5728\u540c\u4e00\u673a\u5668\u4e0a\u8fd0\u884cNATS\u3001Controller\u3001Cache\u548cPlotter\u7ec4\u4ef6\u6765\u51cf\u5c11\u5c40\u57df\u7f51\u5e26\u5bbd\u4f7f\u7528\u91cf\u3002 \u6b64\u8bbe\u7f6e\u5141\u8bb8\u5927\u591a\u6570\u6570\u636e\u4f20\u8f93\u5728\u672c\u5730\u73af\u56de\u63a5\u53e3\u4e0a\u8fdb\u884c\u3002"})}),"\n",(0,t.jsx)(n.h2,{id:"\u4e3b\u8981\u4f18\u52bf",children:"\u4e3b\u8981\u4f18\u52bf"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Remote Compute Capability"}),(0,t.jsx)(n.br,{}),"\n","Multiple PCs can contribute their CPU and GPU resources for plotting and replotting, without the need to store farms locally."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5197\u4f59"}),(0,t.jsx)(n.br,{}),"\n","\u6bcf\u4e2a\u8fdb\u7a0b\u5728\u591a\u53f0\u8ba1\u7b97\u673a\u8fd0\u884c\u589e\u52a0\u5197\u4f59\u548c\u7cfb\u7edf\u7a33\u5b9a\u6027\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5e26\u5bbd\u6548\u7387"}),(0,t.jsx)(n.br,{}),"\n","Piece cache \u7684\u96c6\u4e2d\u5b58\u50a8\u6709\u52a9\u4e8e\u8282\u7ea6\u5c40\u57df\u7f51\u5e26\u5bbd\u3002"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Additional Space"}),(0,t.jsx)(n.br,{}),"\n","Relocating the piece sync cache to a central location frees up an additional 1% of farm capacity for farming, compared to the Standalone Farmer."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"nats",children:"NATS"}),"\n",(0,t.jsxs)(n.p,{children:["\u96c6\u7fa4\u7684\u6838\u5fc3\u662f\u4e00\u4e2a\u7b2c\u4e09\u65b9\u8f6f\u4ef6\uff0c\u53eb\u505a ",(0,t.jsx)(n.a,{href:"https://nats.io/",children:"NATS"}),"\uff0c\u7528\u4e8e\u519c\u573a\u7ec4\u4ef6\u4e4b\u95f4\u7684\u901a\u4fe1\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"The simplest way to install and run NATS is via Docker."}),"\n",(0,t.jsxs)(r,{open:!0,children:[(0,t.jsx)("summary",{children:"Set Up and Configure NATS"}),(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\u521b\u5efa\u5e76\u4fdd\u5b58 ",(0,t.jsx)(n.code,{children:"nats.config"})," \u914d\u7f6e\u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="nats.conf"',children:"max_payload = 2MB\n"})}),(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528Docker\u542f\u52a8NATS\uff1a"}),"\n"]}),(0,t.jsx)(n.admonition,{title:"Replace these placeholders",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<PATH_TO_NATS_CONFIG>"}),": The path to your nats.config file created in step 1"]}),"\n"]})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"docker run \\\n    --name nats \\\n    --restart unless-stopped \\\n    --publish 4222:4222 \\\n    --volume <PATH_TO_NATS_CONFIG>:/nats.config:ro \\\n    nats -c /nats.config\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u7ec4\u4ef6\u914d\u7f6e",children:"\u7ec4\u4ef6\u914d\u7f6e"}),"\n",(0,t.jsx)(n.p,{children:"\u914d\u7f6e\u96c6\u7fa4\u7c7b\u4f3c\u4e8e\u914d\u7f6e\u72ec\u7acb\u8fd0\u884c\u7684\u519c\u6c11\u8282\u70b9\uff0c \u4f46\u6bcf\u4e2a\u7ec4\u4ef6\u5fc5\u987b\u6839\u636e\u60a8\u60f3\u8981\u521b\u5efa\u7684\u96c6\u7fa4\u8bbe\u7f6e\u8fdb\u884c\u914d\u7f6e\u3002 \u8bf7\u8bb0\u4f4f\uff0c\u6240\u6709\u7ec4\u4ef6\u901a\u8fc7\u60a8\u5148\u524d\u914d\u7f6e\u7684NATS\u670d\u52a1\u5668\u76f8\u4e92\u901a\u4fe1\u3002 \u4e0b\u9762\u662f\u5efa\u7acb\u6b63\u5e38\u8fd0\u884c\u7684\u96c6\u7fa4\u6240\u9700\u7684\u57fa\u672c\u53c2\u6570\u3002"}),"\n",(0,t.jsxs)(r,{open:!0,children:[(0,t.jsx)("summary",{children:"Controller (Manages node communication and orchestrates other components.)"}),(0,t.jsx)(n.p,{children:"\u542f\u52a8\u7684\u7b2c\u4e00\u4e2a\u7ec4\u4ef6\u662f\u63a7\u5236\u5668\u3002\u5b83\u8fde\u63a5\u5230\u5355\u4e2a\u8282\u70b9\uff0c\u60a8\u5fc5\u987b\u6307\u5b9a\u8282\u70b9\u5728\u7f51\u7edc\u4e0a\u7684\u4f4d\u7f6e\u3002"}),(0,t.jsxs)(n.admonition,{title:"Proper Port Forwarding",type:"caution",children:[(0,t.jsxs)(n.p,{children:["For your cluster to be reachable, open and forward the default port ",(0,t.jsx)(n.code,{children:"30533"})," to the Controller. If you've changed the port or are using multiple controllers, set it with ",(0,t.jsx)(n.code,{children:'--listen-on "/ip4/0.0.0.0/tcp/<PORT>"'}),"."]}),(0,t.jsxs)(n.p,{children:["If you have an IPv6 address but no public IPv4 address, setting the listen port to with ",(0,t.jsx)(n.code,{children:'--listen-on "/ip6/::/tcp/<PORT>"'}),". to accept IPv6 connections is highly recommended."]}),(0,t.jsxs)(n.p,{children:["\u53c2\u89c1\u6211\u4eec",(0,t.jsx)(n.a,{href:"/farming/guides/port-config",children:"\u7aef\u53e3\u8f6c\u53d1"})," \u7684\u6307\u5357\u3002"]})]}),(0,t.jsx)(n.admonition,{title:"Replace these placeholders",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<NATS_IP>"}),": The IP address of your NATS server"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<BASE_PATH>"}),": The path where the controller's peer network details will be saved"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<NODE_IP>"}),": Your node's IP address"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<RPC_PORT>"}),": Your node's RPC port"]}),"\n"]})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    controller \\\n        --base-path "<BASE_PATH>" \\\n        --node-rpc-url "ws://<NODE_IP>:<RPC_PORT>"\n'})}),(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Common Parameters"}),(0,t.jsxs)(n.p,{children:["\u8bf7\u53c2\u9605",(0,t.jsx)(n.code,{children:"./subspace-farmer cluster controller --help"})," \u4ee5\u4e86\u89e3\u6bcf\u4e2a\u9009\u9879\u53ca\u5176\u9ed8\u8ba4\u503c\u7684\u89e3\u91ca\u3002"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'--listen-on "/ip4/0.0.0.0/tcp/<PORT>"\n--listen-on "/ip6/::1/tcp/<PORT>"\n\n--cache-group\n--in-connections\n--out-connections\n--pending-in-connections\n--pending-out-connections\n'})})]})]}),"\n",(0,t.jsxs)(r,{open:!0,children:[(0,t.jsx)("summary",{children:"Cache (Downloads sector data from DSN peers and serves it to the plotter.)"}),(0,t.jsxs)(n.admonition,{title:"Cache Size",type:"caution",children:[(0,t.jsx)(n.p,{children:"\u7f13\u5b58\u5b58\u50a8\u533a\u5757\u94fe\u7684\u6863\u6848\u5386\u53f2\u3002\u4e3a\u4e86\u4f18\u5316\u6027\u80fd\uff0c\u6570\u636e\u7f13\u5b58\u5fc5\u987b\u8db3\u591f\u5927\u4ee5\u4fbf\u672c\u5730\u5b58\u50a8\u8fd9\u4e9b\u6570\u636e\u3002 \u5982\u679c\u6570\u636e\u5728\u7f13\u5b58\u4e2d\u4e0d\u5b58\u5728\uff0c\u7ed8\u56fe\u53ef\u80fd\u4f1a\u56e0\u6b64\u51cf\u6162\uff0c\u56e0\u4e3a\u5b83\u5fc5\u987b\u901a\u8fc7 DSN \u4ece\u5bf9\u7b49\u70b9\u83b7\u53d6\u3002 \u5f53\u524d\uff0c\u6211\u4eec\u5efa\u8bae\u7f13\u5b58\u81f3\u5c11200GiB\u3002"}),(0,t.jsxs)(n.p,{children:["\u5f53\u524d\u5b58\u6863\u5386\u53f2\u8bb0\u5f55\u5927\u5c0f\u53ef\u4ee5\u5728 ",(0,t.jsx)(n.a,{href:"https://astral.autonomys.xyz",children:"Astral Block Explorer"})," \u9876\u90e8\u627e\u5230\u3002"]})]}),(0,t.jsx)(n.admonition,{title:"Replace these placeholders",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<NATS_IP>"}),": The IP address of your NATS server"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<PATH_TO_CACHE>"}),": The path for cache storage"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<CACHE_SIZE>"}),": The size for cache storage"]}),"\n"]})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    cache \\\n        path="<PATH_TO_CACHE>,size=<CACHE_SIZE>"\n'})}),(0,t.jsx)(n.admonition,{title:"Multiple caches",type:"note",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'path="<PATH_TO_CACHE1>,size=<CACHE_SIZE1>" \\\npath="<PATH_TO_CACHE2>,size=<CACHE_SIZE2>"\n'})})}),(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Common Parameters"}),(0,t.jsxs)(n.p,{children:["Refer to ",(0,t.jsx)(n.code,{children:"./subspace-farmer cluster cache --help"})," for an explanation of additional parameters and their default values."]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"--cache-group\n"})})]})]}),"\n",(0,t.jsxs)(r,{open:!0,children:[(0,t.jsx)("summary",{children:"Plotter (Generates and uploads plotted sectors, downloading pieces from cache as needed)"}),(0,t.jsx)(n.admonition,{title:"Replace these placeholders",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<NATS_IP>"}),": The IP address of your NATS server"]}),"\n"]})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    plotter\n'})}),(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Common Parameters"}),(0,t.jsxs)(n.p,{children:["Refer to ",(0,t.jsx)(n.code,{children:"./subspace-farmer cluster plotter --help"})," for an explanation of parameters and their default values."]})]})]}),"\n",(0,t.jsxs)(r,{open:!0,children:[(0,t.jsx)("summary",{children:"Farmer (Manages farms, audits, and retrieves plotted pieces. Requests sector plotting from the Plotter.)"}),(0,t.jsx)(n.admonition,{title:"Replace these placeholders",type:"tip",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<NATS_IP>"}),": The IP address of your NATS server"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<REWARD_ADDRESS>"}),": The reward address where your winning rewards will be sent"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<PATH_TO_FARM>"}),": The path for storing your farm"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<FARM_SIZE>"}),": The size for storing your farm"]}),"\n"]})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    farmer \\\n        --reward-address "<REWARD_ADDRESS>" \\\n        path="<PATH_TO_FARM>,size=<FARM_SIZE>"\n'})}),(0,t.jsx)(n.admonition,{title:"Multiple farms",type:"note",children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'path="<PATH_TO_FARM1>,size=<FARM_SIZE1>" \\\npath="<PATH_TO_FARM2>,size=<FARM_SIZE2>"\n'})})}),(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Common Parameters"}),(0,t.jsxs)(n.p,{children:["\u8bf7\u53c2\u9605",(0,t.jsx)(n.code,{children:"./subspace-farmer cluster farmer --help"})," \u4ee5\u4e86\u89e3\u6bcf\u4e2a\u9009\u9879\u53ca\u5176\u9ed8\u8ba4\u503c\u7684\u89e3\u91ca\u3002"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"--create\n"})})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u5206\u7ec4\u7ec4\u4ef6",children:"\u5206\u7ec4\u7ec4\u4ef6"}),"\n",(0,t.jsxs)(r,{open:!0,children:[(0,t.jsx)("summary",{children:"You can run Farming Cluster components individually or combine them to run simultaneously."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    controller \\\n        --base-path "<BASE_PATH>" \\\n        --node-rpc-url "ws://<NODE_IP>:<RPC_PORT>"\n    -- \\\n    cache \\\n        path="<PATH_TO_CACHE>,size=<CACHE_SIZE>"\n    -- \\\n    plotter\n    -- \\\n    farmer \\\n        --reward-address "<REWARD_ADDRESS>" \\\n        path="<PATH_TO_FARM>,size=<FARM_SIZE>"\n'})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\u8fdb\u9636",children:"\u8fdb\u9636"}),"\n",(0,t.jsx)(n.h3,{id:"nats-\u96c6\u7fa4",children:"NATS \u96c6\u7fa4"}),"\n",(0,t.jsxs)(r,{open:!0,children:[(0,t.jsx)("summary",{children:"Just like every other component in the Farming Cluster, it is possible to have redundant NATS servers. Doing so requires an extra step of configuring those NATS servers in their own cluster."}),(0,t.jsxs)(n.p,{children:["\u67e5\u770b ",(0,t.jsx)(n.a,{href:"https://docs.nats.io/running-a-nats-service/configuration/clustering",children:"NATS.io\u96c6\u7fa4\u6307\u5357"})," \u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002"]}),(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(n.mermaid,{value:"flowchart\n    A[Farming Cluster Components] <--\x3e B((NATS Server 1))\n    A[Farming Cluster Components] <--\x3e C((NATS Server 2))"})}),(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Configuration"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 cluster \\\n    controller \\\n        --nats-server="nats://<NATS_IP_1>:4222" \\\n        --nats-server="nats://<NATS_IP_2>:4222" \\\n        --base-path "<BASE_PATH>" \\\n        --node-rpc-url "ws://<NODE_IP>:<RPC_PORT>"        \n'})})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u591a\u7ec4\u4ef6",children:"\u591a\u7ec4\u4ef6"}),"\n",(0,t.jsxs)(r,{open:!0,children:[(0,t.jsx)("summary",{children:"This will demonstrate how to run multiple components in one Farming Cluster: (1) NATS Server, (2) Controllers, (2) Caches, (2) Plotters, and (3) Farmers."}),(0,t.jsx)("div",{style:{textAlign:"center"},children:(0,t.jsx)(n.mermaid,{value:"flowchart\nNATS((NATS Server))\nController1(Controller 1)\nController2(Controller 2)\nCache1(Cache 1)\nCache2(Cache 2)\nPlotter1(Plotter 1)\nPlotter2(Plotter 2)\nFarmer1(Farmer 1)\nFarmer2(Farmer 2)\nFarmer3(Farmer 3)\n\nController1  <--\x3e  NATS\nController2  <--\x3e  NATS\n\nCache1  <--\x3e  NATS\nCache2  <--\x3e  NATS\n\nPlotter1  <--\x3e  NATS\nPlotter2  <--\x3e  NATS\n\nFarmer1 <--\x3e  NATS\nFarmer2 <--\x3e  NATS\nFarmer3 <--\x3e  NATS\n"})}),(0,t.jsx)(n.admonition,{title:"Multiple Cache Groups",type:"caution",children:(0,t.jsxs)(n.p,{children:["Each cache group must have a unique name, and controllers can be assigned one or more. Specify an alphanumeric name for each using ",(0,t.jsx)(n.code,{children:'--cache-group "<CACHE_GROUP>"'}),"."]})}),(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Configuration"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Controller #1"',children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    controller \\\n        --base-path "<BASE_PATH>" \\\n        --cache-group "<CACHE_GROUP_1>" \\\n        --cache-group "<CACHE_GROUP_2>" \\\n        --node-rpc-url "ws://<NODE_IP>:<RPC_PORT>"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Controller #2"',children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    controller \\\n        --base-path "<BASE_PATH>" \\\n        --cache-group "<CACHE_GROUP_2>" \\\n        --node-rpc-url "ws://<NODE_IP>:<RPC_PORT>"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Cache #1"',children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    cache \\\n        --cache-group "<CACHE_GROUP_1>" \\\n        path="<PATH_TO_CACHE>,size=<CACHE_SIZE>"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Cache #2"',children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    cache \\\n        --cache-group "<CACHE_GROUP_2>" \\\n        path="<PATH_TO_CACHE>,size=<CACHE_SIZE>"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Plotter #1"',children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    plotter\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Plotter #2"',children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    plotter\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Farmer #1"',children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    farmer \\\n        --reward-address "<REWARD_ADDRESS>" \\\n        path="<PATH_TO_FARM>,size=<FARM_SIZE>"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Farmer #2"',children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    farmer \\\n        --reward-address "<REWARD_ADDRESS>" \\\n        path="<PATH_TO_FARM>,size=<FARM_SIZE>"\n'})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:'title="Farmer #3"',children:'./subspace-farmer-ubuntu-x86_64-skylake-mainnet-2025-jun-18 \\\n    cluster \\\n        --nats-server "nats://<NATS_IP>:4222" \\\n    farmer \\\n        --reward-address "<REWARD_ADDRESS>" \\\n        path="<PATH_TO_FARM>,size=<FARM_SIZE>"\n'})})]})]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>i});var s=r(96540);const t={},a=s.createContext(t);function l(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);